// Generated by CoffeeScript 1.9.3
(function() {
  var body, browser, css, html, i, is_exports, is_modern_browser, j, len, len1, mobile, mobile_list, modern_browsers, new_body, oldbrowser, ref, root, script, scripts, styles,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  is_exports = typeof exports !== "undefined" && exports !== null;

  root = is_exports ? exports : this;

  if (!root.sup) {
    root.sup = {};
  }

  mobile_list = [
    {
      pattern: /Android/i,
      name: 'Android',
      alias: 'android'
    }, {
      pattern: /webOS/i,
      name: 'webOS',
      alias: 'webos'
    }, {
      pattern: /iPhone/i,
      name: 'iPhone',
      alias: 'iphone'
    }, {
      pattern: /iPad/i,
      name: 'iPad',
      alias: 'ipad'
    }, {
      pattern: /iPod/i,
      name: 'iPod',
      alias: 'ipod'
    }, {
      pattern: /BlackBerry/i,
      name: 'BlackBerry',
      alias: 'blackberry'
    }, {
      pattern: /Windows Phone/i,
      name: 'WindowsPhone',
      alias: 'wp'
    }
  ];

  mobile = (function() {
    var i, len, m;
    for (i = 0, len = mobile_list.length; i < len; i++) {
      m = mobile_list[i];
      if (navigator.userAgent.match(m.pattern)) {
        return m;
      }
    }
    return null;
  })();

  browser = (function() {
    var M, tem, ua;
    ua = navigator.userAgent;
    tem = void 0;
    M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i);
    if (!M) {
      M = [];
    }
    if (/trident/i.test(M[1])) {
      tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
      return "IE " + (tem[1] || "");
    }
    if (M[1] === "Chrome") {
      tem = ua.match(/\bOPR\/(\d+)/);
      if (tem != null) {
        return "Opera " + tem[1];
      }
    }
    if (M[2]) {
      M = [M[1], M[2]];
    } else {
      M = [navigator.appName, navigator.appVersion, "-?"];
    }
    if ((tem = ua.match(/version\/(\d+)/i)) != null) {
      M.splice(1, 1, tem[1]);
    }
    M.join(" ");
    browser = {
      alias: M[0],
      ver: M[1],
      mobile: mobile
    };
    return browser;
  })();

  modern_browsers = ['Chrome', 'Opera', 'Safari', 'Firefox', 'MSIE'];

  is_modern_browser = true;

  if (ref = browser.alias, indexOf.call(modern_browsers, ref) < 0) {
    is_modern_browser = false;
  }

  if (browser.alias === 'MSIE' && parseInt(browser.ver) < 10) {
    is_modern_browser = false;
  }

  if (navigator.userAgent.indexOf('Mobile') > -1) {
    is_modern_browser = true;
  }

  console.log('Detect browser: ', browser, is_modern_browser);

  root.sup.browser = browser;

  if (!document.querySelector('[modern-browser]')) {
    return;
  }

  if (!is_modern_browser) {
    body = document.body;
    if (!body) {
      return;
    }
    html = body.parentNode;
    if (!html) {
      return;
    }
    html.removeChild(body);
    styles = document.querySelectorAll('link[rel="stylesheet"]');
    for (i = 0, len = styles.length; i < len; i++) {
      css = styles[i];
      css.parentNode.removeChild(css);
    }
    scripts = document.querySelectorAll('script');
    for (j = 0, len1 = scripts.length; j < len1; j++) {
      script = scripts[j];
      script.parentNode.removeChild(script);
    }
    new_body = document.createElement("BODY");
    oldbrowser = '<link href="http://libs.soopro.com/browser/browser.css" rel="stylesheet">' + '<div id="wrapper">' + ' <div id="logo">' + '   <img src="http://libs.soopro.com/brand/logo.png" alt="Soopro"/>' + ' </div>' + ' <div class="content">' + '   <p>Your browser is too old. Hope you can change more reliable web browser.' + '   <br>We recommend you choose better browser following:</p>' + '   <p>您的浏览器老掉牙了，希望您能紧跟时代立刻升级。' + '   <br>推荐你选择使用以下浏览器：</p>' + ' </div>' + ' <div class="browsers">' + '   <div class="browser">' + '     <a href="http://www.firefox.com" target="_blank">' + '       <img src="http://libs.soopro.com/browser/browser_firefox.png" alt="Firefox"/>' + '     </a>' + '   </div>' + '   <div class="browser">' + '     <a href="http://www.chrome.com" target="_blank">' + '       <img src="http://libs.soopro.com/browser/browser_chrome.png" alt="Chrome"/>' + '     </a>' + '   </div>' + '   <div class="browser">' + '     <a href="http://support.apple.com/downloads/#safari" target="_blank">' + '       <img src="http://libs.soopro.com/browser/browser_safari.png" alt="Safari"/>' + '     </a>' + '   </div>' + '   <div class="browser">' + '     <a href="http://www.opera.com/" target="_blank">' + '       <img src="http://libs.soopro.com/browser/browser_opera.png" alt="Opera"/>' + '     </a>' + '   </div>' + '   <div class="browser">' + '     <a href="http://ie.sogou.com/" target="_blank">' + '       <img src="http://libs.soopro.com/browser/browser_sogou.png" alt="Sogou"/>' + '     </a>' + '   </div>' + ' </div>' + ' <div class="copyright">' + '   <small>&copy; Soopro Co.,ltd.</small>' + ' </div>' + '</div>';
    new_body.innerHTML = oldbrowser;
    html.appendChild(new_body);
  }

}).call(this);
